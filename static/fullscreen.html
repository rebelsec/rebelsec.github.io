<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fullscreen Delay PoC</title>
  <style>
    :root{
      --bg:#f7fafc; --card:#ffffff; --accent:#2563eb; --muted:#6b7280;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }
    html,body{height:100%;margin:0;background:var(--bg);display:flex;align-items:center;justify-content:center}
    .card{width:300px;background:var(--card);border-radius:12px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.08);text-align:center}
    h1{font-size:16px;margin:0 0 8px}
    .btn-row{margin-top:10px}
    button{width:100%;padding:10px;border-radius:8px;border:0;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    .status{margin-top:10px;font-size:13px;color:var(--muted);min-height:20px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Wait 3s → Fullscreen</h1>
    <div class="btn-row">
      <button id="btnFsOnly">Wait 3s → Fullscreen</button>
    </div>
    <div id="status" class="status">Status: idle</div>
  </div>

<script>
(() => {
  const btnFsOnly = document.getElementById('btnFsOnly');
  const statusEl = document.getElementById('status');
  const DELAY_MS = 3000;

  function setStatus(txt){
    statusEl.textContent = 'Status: ' + txt;
  }

  async function delay(ms){ return new Promise(res => setTimeout(res, ms)); }

  async function enterFullscreen(){
    try {
      if (document.fullscreenElement) {
        setStatus('Already in fullscreen.');
        return true;
      }
      if (document.documentElement.requestFullscreen) {
        setStatus('Entering fullscreen...');
        await document.documentElement.requestFullscreen();
        setStatus('Entered fullscreen.');
        return true;
      } else {
        setStatus('Fullscreen API not supported.');
        return false;
      }
    } catch (e) {
      console.error('requestFullscreen error', e);
      setStatus('Failed to enter fullscreen: ' + (e.message || e.name));
      return false;
    }
  }

  btnFsOnly.addEventListener('click', async () => {
    btnFsOnly.disabled = true;
    setStatus('Waiting ' + (DELAY_MS/1000) + 's before entering fullscreen...');
    await delay(DELAY_MS);
    await enterFullscreen();
    setStatus('Fullscreen sequence complete.');
    btnFsOnly.disabled = false;
  });

  document.addEventListener('fullscreenchange', () => {
    if (!document.fullscreenElement) {
      setStatus('Exited fullscreen.');
    }
  });
})();
</script>
</body>
</html>
